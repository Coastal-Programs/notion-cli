# Notion CLI Configuration Example
# Copy this file to .env and customize for your needs

# ============================================
# Required Configuration
# ============================================

# Your Notion API token (required)
NOTION_TOKEN=secret_xxx

# ============================================
# Enhanced Retry Logic Configuration
# ============================================

# Maximum number of retry attempts for failed API calls
# Default: 3
# Recommended: 3-5 for production, 2-3 for development
NOTION_CLI_MAX_RETRIES=3

# Base delay in milliseconds before first retry
# Default: 1000 (1 second)
# Recommended: 1000-2000ms for most use cases
NOTION_CLI_BASE_DELAY=1000

# Maximum delay cap in milliseconds
# Default: 30000 (30 seconds)
# Recommended: 30000-60000ms
NOTION_CLI_MAX_DELAY=30000

# Exponential backoff base multiplier
# Default: 2
# Recommended: 2-3 (2 = double each time, 3 = triple each time)
NOTION_CLI_EXP_BASE=2

# Jitter factor to add randomness (0-1)
# Default: 0.1 (10% random variation)
# Recommended: 0.1-0.2 to prevent thundering herd
NOTION_CLI_JITTER_FACTOR=0.1

# ============================================
# Caching Layer Configuration
# ============================================

# Enable or disable the caching layer
# Default: true
# Set to false to disable all caching
NOTION_CLI_CACHE_ENABLED=true

# Default TTL (time-to-live) in milliseconds
# Default: 300000 (5 minutes)
# This is used for resources without specific TTL
NOTION_CLI_CACHE_TTL=300000

# Maximum number of cached entries
# Default: 1000
# Increase for read-heavy workloads, decrease to save memory
NOTION_CLI_CACHE_MAX_SIZE=1000

# ============================================
# Per-Resource Type TTL Configuration
# ============================================

# Data Source (Database) schema TTL
# Default: 600000 (10 minutes)
# Schemas rarely change, safe to cache longer
NOTION_CLI_CACHE_DS_TTL=600000

# Database metadata TTL
# Default: 600000 (10 minutes)
NOTION_CLI_CACHE_DB_TTL=600000

# User information TTL
# Default: 3600000 (1 hour)
# User info is very stable, can cache for hours
NOTION_CLI_CACHE_USER_TTL=3600000

# Page content TTL
# Default: 60000 (1 minute)
# Pages change frequently, use short TTL
NOTION_CLI_CACHE_PAGE_TTL=60000

# Block content TTL
# Default: 30000 (30 seconds)
# Blocks are most dynamic, use shortest TTL
NOTION_CLI_CACHE_BLOCK_TTL=30000

# ============================================
# Performance Optimizations
# ============================================

# Enable request deduplication to prevent duplicate concurrent API calls
# Default: true
# Set to false to disable deduplication
NOTION_CLI_DEDUP_ENABLED=true

# Block deletion concurrency (when updating pages)
# Default: 5
# Higher values = faster but more API load
NOTION_CLI_DELETE_CONCURRENCY=5

# Child block fetching concurrency (when retrieving pages recursively)
# Default: 10
# Higher values = faster but more API load
NOTION_CLI_CHILDREN_CONCURRENCY=10

# Enable persistent disk cache
# Default: true
# Set to false to disable disk caching (memory cache only)
NOTION_CLI_DISK_CACHE_ENABLED=true

# Maximum disk cache size in bytes
# Default: 104857600 (100MB)
# Cache will automatically remove oldest entries when limit is reached
NOTION_CLI_DISK_CACHE_MAX_SIZE=104857600

# Disk cache sync interval in milliseconds
# Default: 5000 (5 seconds)
# How often to flush dirty cache entries to disk
NOTION_CLI_DISK_CACHE_SYNC_INTERVAL=5000

# ============================================
# Debug Configuration
# ============================================

# Enable debug logging to see cache hits/misses and retry attempts
# Default: false
# Set to true to see detailed logging
DEBUG=false

# ============================================
# Example Configurations for Different Scenarios
# ============================================

# --- Scenario 1: Development (Fast iteration, frequent changes) ---
# NOTION_CLI_MAX_RETRIES=2
# NOTION_CLI_CACHE_TTL=30000
# NOTION_CLI_CACHE_DS_TTL=60000
# NOTION_CLI_CACHE_USER_TTL=300000
# DEBUG=true

# --- Scenario 2: Production (Balanced performance and reliability) ---
# NOTION_CLI_MAX_RETRIES=5
# NOTION_CLI_BASE_DELAY=1000
# NOTION_CLI_MAX_DELAY=30000
# NOTION_CLI_CACHE_ENABLED=true
# NOTION_CLI_CACHE_MAX_SIZE=2000
# NOTION_CLI_CACHE_DS_TTL=600000
# NOTION_CLI_CACHE_USER_TTL=3600000
# DEBUG=false

# --- Scenario 3: Read-Heavy Workload (Maximum caching) ---
# NOTION_CLI_CACHE_ENABLED=true
# NOTION_CLI_CACHE_MAX_SIZE=5000
# NOTION_CLI_CACHE_DS_TTL=1800000  # 30 minutes
# NOTION_CLI_CACHE_DB_TTL=1800000
# NOTION_CLI_CACHE_USER_TTL=7200000  # 2 hours
# NOTION_CLI_CACHE_PAGE_TTL=300000  # 5 minutes

# --- Scenario 4: Write-Heavy Workload (Minimal caching) ---
# NOTION_CLI_CACHE_ENABLED=true
# NOTION_CLI_CACHE_DS_TTL=60000  # 1 minute
# NOTION_CLI_CACHE_PAGE_TTL=10000  # 10 seconds
# NOTION_CLI_CACHE_BLOCK_TTL=5000  # 5 seconds

# --- Scenario 5: Unstable Network (Aggressive retry) ---
# NOTION_CLI_MAX_RETRIES=10
# NOTION_CLI_BASE_DELAY=2000
# NOTION_CLI_MAX_DELAY=60000
# NOTION_CLI_EXP_BASE=2.5
# NOTION_CLI_JITTER_FACTOR=0.15

# --- Scenario 6: Memory-Constrained Environment ---
# NOTION_CLI_CACHE_ENABLED=true
# NOTION_CLI_CACHE_MAX_SIZE=100
# NOTION_CLI_CACHE_TTL=60000

# --- Scenario 7: Disable All Caching ---
# NOTION_CLI_CACHE_ENABLED=false
